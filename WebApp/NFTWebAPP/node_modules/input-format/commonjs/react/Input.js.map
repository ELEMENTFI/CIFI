{"version":3,"sources":["../../source/react/Input.js"],"names":["Input","ref","value","parse","format","InputComponent","inputComponent","onChange","onKeyDown","rest","internalRef","setRef","instance","current","_onChange","event","_onKeyDown","isEmptyValue","text","React","forwardRef","propTypes","PropTypes","func","isRequired","elementType","type","string","onCut","onPaste","defaultProps","undefined"],"mappings":"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","sourcesContent":["// This is just `./ReactInput.js` rewritten in Hooks.\r\n\r\nimport React, { useCallback, useRef } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport {\r\n\tonChange as onInputChange,\r\n\tonKeyDown as onInputKeyDown\r\n} from '../inputControl'\r\n\r\n// Usage:\r\n//\r\n// <ReactInput\r\n// \tvalue={this.state.phone}\r\n// \tonChange={phone => this.setState({ phone })}\r\n// \tparse={character => character}\r\n// \tformat={value => ({ text: value, template: 'xxxxxxxx' })}/>\r\n//\r\nfunction Input({\r\n\tvalue,\r\n\tparse,\r\n\tformat,\r\n\tinputComponent: InputComponent,\r\n\tonChange,\r\n\tonKeyDown,\r\n\t...rest\r\n}, ref) {\r\n\tconst internalRef = useRef();\r\n\tconst setRef = useCallback((instance) => {\r\n\t\tinternalRef.current = instance;\r\n\t\tif (ref) {\r\n\t\t\tif (typeof ref === 'function') {\r\n\t\t\t\tref(instance)\r\n\t\t\t} else {\r\n\t\t\t\tref.current = instance\r\n\t\t\t}\r\n\t\t}\r\n\t}, [ref]);\r\n\tconst _onChange = useCallback((event) => {\r\n\t\treturn onInputChange(\r\n\t\t\tevent,\r\n\t\t\tinternalRef.current,\r\n\t\t\tparse,\r\n\t\t\tformat,\r\n\t\t\tonChange\r\n\t\t)\r\n\t}, [internalRef, parse, format, onChange])\r\n\r\n\tconst _onKeyDown = useCallback((event) => {\r\n\t\tif (onKeyDown) {\r\n\t\t\tonKeyDown(event)\r\n\t\t}\r\n\t\treturn onInputKeyDown(\r\n\t\t\tevent,\r\n\t\t\tinternalRef.current,\r\n\t\t\tparse,\r\n\t\t\tformat,\r\n\t\t\tonChange\r\n\t\t)\r\n\t}, [internalRef, parse, format, onChange, onKeyDown])\r\n\r\n\treturn (\r\n\t\t<InputComponent\r\n\t\t\t{...rest}\r\n\t\t\tref={setRef}\r\n\t\t\tvalue={format(isEmptyValue(value) ? '' : value).text}\r\n\t\t\tonKeyDown={_onKeyDown}\r\n\t\t\tonChange={_onChange}/>\r\n\t)\r\n}\r\n\r\nInput = React.forwardRef(Input)\r\n\r\nInput.propTypes = {\r\n\t// Parses a single characher of `<input/>` text.\r\n\tparse: PropTypes.func.isRequired,\r\n\r\n\t// Formats `value` into `<input/>` text.\r\n\tformat: PropTypes.func.isRequired,\r\n\r\n\t// Renders `<input/>` by default.\r\n\tinputComponent: PropTypes.elementType.isRequired,\r\n\r\n\t// `<input/>` `type` attribute.\r\n\ttype: PropTypes.string.isRequired,\r\n\r\n\t// Is parsed from <input/> text.\r\n\tvalue: PropTypes.string,\r\n\r\n\t// This handler is called each time `<input/>` text is changed.\r\n\tonChange: PropTypes.func.isRequired,\r\n\r\n\t// Passthrough\r\n\tonKeyDown: PropTypes.func,\r\n\tonCut: PropTypes.func,\r\n\tonPaste: PropTypes.func\r\n}\r\n\r\nInput.defaultProps = {\r\n\t// Renders `<input/>` by default.\r\n\tinputComponent: 'input',\r\n\r\n\t// `<input/>` `type` attribute.\r\n\ttype: 'text'\r\n}\r\n\r\nexport default Input\r\n\r\nfunction isEmptyValue(value) {\r\n\treturn value === undefined || value === null\r\n}"],"file":"Input.js"}