{"ast":null,"code":"'use strict';\n\nconst promisify = require('promisify-es6');\n\nmodule.exports = send => {\n  return promisify((key, opts, callback) => {\n    if (typeof opts === 'function' && !callback) {\n      callback = opts;\n      opts = {};\n    } // opts is the real callback --\n    // 'callback' is being injected by promisify\n\n\n    if (typeof opts === 'function' && typeof callback === 'function') {\n      callback = opts;\n      opts = {};\n    }\n\n    function handleResult(done, err, res) {\n      if (err) {\n        return done(err);\n      }\n\n      if (!res) {\n        return done(new Error('empty response'));\n      }\n\n      if (res.length === 0) {\n        return done(new Error('no value returned for key'));\n      } // Inconsistent return values in the browser vs node\n\n\n      if (Array.isArray(res)) {\n        res = res[0];\n      }\n\n      if (res.Type === 5) {\n        done(null, res.Extra);\n      } else {\n        let error = new Error('key was not found (type 6)');\n        done(error);\n      }\n    }\n\n    send({\n      path: 'dht/get',\n      args: key,\n      qs: opts\n    }, handleResult.bind(null, callback));\n  });\n};","map":{"version":3,"sources":["C:/demoAlgo/smart-contracts/devrel/algosigner-react/CIFI/WebApp/NFTWebAPP/node_modules/ipfs-api/src/dht/get.js"],"names":["promisify","require","module","exports","send","key","opts","callback","handleResult","done","err","res","Error","length","Array","isArray","Type","Extra","error","path","args","qs","bind"],"mappings":"AAAA;;AAEA,MAAMA,SAAS,GAAGC,OAAO,CAAC,eAAD,CAAzB;;AAEAC,MAAM,CAACC,OAAP,GAAkBC,IAAD,IAAU;AACzB,SAAOJ,SAAS,CAAC,CAACK,GAAD,EAAMC,IAAN,EAAYC,QAAZ,KAAyB;AACxC,QAAI,OAAOD,IAAP,KAAgB,UAAhB,IAA8B,CAACC,QAAnC,EAA6C;AAC3CA,MAAAA,QAAQ,GAAGD,IAAX;AACAA,MAAAA,IAAI,GAAG,EAAP;AACD,KAJuC,CAMxC;AACA;;;AACA,QAAI,OAAOA,IAAP,KAAgB,UAAhB,IAA8B,OAAOC,QAAP,KAAoB,UAAtD,EAAkE;AAChEA,MAAAA,QAAQ,GAAGD,IAAX;AACAA,MAAAA,IAAI,GAAG,EAAP;AACD;;AAED,aAASE,YAAT,CAAuBC,IAAvB,EAA6BC,GAA7B,EAAkCC,GAAlC,EAAuC;AACrC,UAAID,GAAJ,EAAS;AACP,eAAOD,IAAI,CAACC,GAAD,CAAX;AACD;;AACD,UAAI,CAACC,GAAL,EAAU;AACR,eAAOF,IAAI,CAAC,IAAIG,KAAJ,CAAU,gBAAV,CAAD,CAAX;AACD;;AACD,UAAID,GAAG,CAACE,MAAJ,KAAe,CAAnB,EAAsB;AACpB,eAAOJ,IAAI,CAAC,IAAIG,KAAJ,CAAU,2BAAV,CAAD,CAAX;AACD,OAToC,CAWrC;;;AACA,UAAIE,KAAK,CAACC,OAAN,CAAcJ,GAAd,CAAJ,EAAwB;AACtBA,QAAAA,GAAG,GAAGA,GAAG,CAAC,CAAD,CAAT;AACD;;AAED,UAAIA,GAAG,CAACK,IAAJ,KAAa,CAAjB,EAAoB;AAClBP,QAAAA,IAAI,CAAC,IAAD,EAAOE,GAAG,CAACM,KAAX,CAAJ;AACD,OAFD,MAEO;AACL,YAAIC,KAAK,GAAG,IAAIN,KAAJ,CAAU,4BAAV,CAAZ;AACAH,QAAAA,IAAI,CAACS,KAAD,CAAJ;AACD;AACF;;AAEDd,IAAAA,IAAI,CAAC;AACHe,MAAAA,IAAI,EAAE,SADH;AAEHC,MAAAA,IAAI,EAAEf,GAFH;AAGHgB,MAAAA,EAAE,EAAEf;AAHD,KAAD,EAIDE,YAAY,CAACc,IAAb,CAAkB,IAAlB,EAAwBf,QAAxB,CAJC,CAAJ;AAKD,GA1Ce,CAAhB;AA2CD,CA5CD","sourcesContent":["'use strict'\r\n\r\nconst promisify = require('promisify-es6')\r\n\r\nmodule.exports = (send) => {\r\n  return promisify((key, opts, callback) => {\r\n    if (typeof opts === 'function' && !callback) {\r\n      callback = opts\r\n      opts = {}\r\n    }\r\n\r\n    // opts is the real callback --\r\n    // 'callback' is being injected by promisify\r\n    if (typeof opts === 'function' && typeof callback === 'function') {\r\n      callback = opts\r\n      opts = {}\r\n    }\r\n\r\n    function handleResult (done, err, res) {\r\n      if (err) {\r\n        return done(err)\r\n      }\r\n      if (!res) {\r\n        return done(new Error('empty response'))\r\n      }\r\n      if (res.length === 0) {\r\n        return done(new Error('no value returned for key'))\r\n      }\r\n\r\n      // Inconsistent return values in the browser vs node\r\n      if (Array.isArray(res)) {\r\n        res = res[0]\r\n      }\r\n\r\n      if (res.Type === 5) {\r\n        done(null, res.Extra)\r\n      } else {\r\n        let error = new Error('key was not found (type 6)')\r\n        done(error)\r\n      }\r\n    }\r\n\r\n    send({\r\n      path: 'dht/get',\r\n      args: key,\r\n      qs: opts\r\n    }, handleResult.bind(null, callback))\r\n  })\r\n}\r\n"]},"metadata":{},"sourceType":"script"}